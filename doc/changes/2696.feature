Implement partial trace and tensor product for states in excitation-number restricted space.